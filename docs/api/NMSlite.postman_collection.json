{
	"info": {
		"_postman_id": "nms-lite-api-collection",
		"name": "NMS Lite API",
		"description": "Complete API collection for NMS Lite - Network Monitoring System\n\nBase URL: http://localhost:8080/api/v1\n\nAuthentication: Most endpoints require JWT Bearer token obtained from /login endpoint.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{jwt_token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080/api/v1",
			"type": "string"
		},
		{
			"key": "jwt_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "credential_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "discovery_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "monitor_id",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"jwt_token\", jsonData.token);",
									"    pm.environment.set(\"jwt_token\", jsonData.token);",
									"    console.log('JWT Token saved: ' + jsonData.token);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"admin\",\n  \"password\": \"changeme\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"login"
						]
						},
						"description": "Authenticate and receive JWT token for subsequent requests."
					},
					"response": []
				}
			],
			"description": "Authentication endpoints"
		},
		{
			"name": "Health Checks",
			"item": [
				{
					"name": "Liveness Probe",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8080/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"health"
						]
						},
						"description": "Check if the service is alive and responding."
					},
					"response": []
				},
				{
					"name": "Readiness Probe",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost:8080/ready",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"port": "8080",
							"path": [
								"ready"
						]
						},
						"description": "Check if the service is ready to accept traffic (database, queues, plugins)."
					},
					"response": []
				}
			],
			"description": "Health check endpoints (no authentication required)"
		},
		{
			"name": "Protocols",
			"item": [
				{
					"name": "List All Protocols",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/protocols",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"protocols"
						]
					}
				},
				{
					"name": "Get WinRM Schema",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/protocols/winrm/schema",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"protocols",
								"winrm",
								"schema"
						]
					}
				},
				{
					"name": "Get SSH Schema",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/protocols/ssh/schema",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"protocols",
								"ssh",
								"schema"
						]
					}
				},
				{
					"name": "Get SNMP v2c Schema",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/protocols/snmp-v2c/schema",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"protocols",
								"snmp-v2c",
								"schema"
						]
					}
				}
			],
			"description": "Protocol information and schema endpoints"
		},
		{
			"name": "Credential Profiles",
			"item": [
				{
					"name": "List All Credentials",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/credentials?page=1&limit=50",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"credentials"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "50"
								},
								{
									"key": "protocol",
									"value": "winrm",
									"disabled": true
								}
						]
					},
					"description": "List all credential profiles with optional filtering by protocol."
				},
				{
					"name": "Create WinRM Credential",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"credential_id\", jsonData.id);",
									"    console.log('Credential ID saved: ' + jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Production Windows Cluster\",\n  \"description\": \"Credentials for all Win2019 servers\",\n  \"protocol\": \"winrm\",\n  \"credential_data\": {\n    \"username\": \"admin_user\",\n    \"password\": \"SecurePassword123!\",\n    \"domain\": \"internal.corp\",\n    \"use_https\": false\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/credentials",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"credentials"
						]
						},
						"description": "Create a new WinRM credential profile."
					},
					"response": []
				},
				{
					"name": "Create SSH Credential",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Linux SSH Credentials\",\n  \"description\": \"SSH credentials for Linux servers\",\n  \"protocol\": \"ssh\",\n  \"credential_data\": {\n    \"username\": \"root\",\n    \"password\": \"RootPassword123!\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/credentials",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"credentials"
						]
						},
						"description": "Create a new SSH credential profile with password authentication."
					},
					"response": []
				},
				{
					"name": "Create SSH Credential (Private Key)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Linux SSH Key Auth\",\n  \"description\": \"SSH credentials using private key\",\n  \"protocol\": \"ssh\",\n  \"credential_data\": {\n    \"username\": \"ubuntu\",\n    \"private_key\": \"-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBA...\n-----END RSA PRIVATE KEY-----\",\n    \"passphrase\": \"key_passphrase\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/credentials",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"credentials"
						]
						},
						"description": "Create a new SSH credential profile with private key authentication."
					},
					"response": []
				},
				{
					"name": "Create SNMP Credential",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Network Devices SNMP\",\n  \"description\": \"SNMP v2c credentials for network devices\",\n  \"protocol\": \"snmp-v2c\",\n  \"credential_data\": {\n    \"community\": \"public\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/credentials",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"credentials"
						]
						},
						"description": "Create a new SNMP v2c credential profile."
					},
					"response": []
				},
				{
					"name": "Get Credential by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/credentials/{{credential_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"credentials",
								"{{credential_id}}"
						]
						},
						"description": "Get a specific credential profile by ID."
					},
					"response": []
				},
				{
					"name": "Update Credential",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Windows Cluster\",\n  \"description\": \"Updated description\",\n  \"credential_data\": {\n    \"username\": \"new_admin\",\n    \"password\": \"NewPassword123!\",\n    \"domain\": \"internal.corp\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/credentials/{{credential_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"credentials",
								"{{credential_id}}"
						]
						},
						"description": "Update an existing credential profile."
					},
					"response": []
				},
				{
					"name": "Delete Credential",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/credentials/{{credential_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"credentials",
								"{{credential_id}}"
						]
						},
						"description": "Soft delete a credential profile."
					},
					"response": []
				}
			],
			"description": "Credential profile management endpoints"
		},
		{
			"name": "Discovery Profiles",
			"item": [
				{
					"name": "List All Discovery Profiles",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/discoveries?page=1&limit=50",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"discoveries"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "50"
								}
						]
					},
					"response": []
				},
				{
					"name": "Create Discovery Profile (CIDR)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    var jsonData = pm.response.json();",
									"    pm.collectionVariables.set(\"discovery_id\", jsonData.id);",
									"    console.log('Discovery ID saved: ' + jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Datacenter A - Subnet 10\",\n  \"target_type\": \"cidr\",\n  \"target_value\": \"192.168.10.0/24\",\n  \"ports\": [22, 5985, 443],\n  \"port_scan_timeout_ms\": 2000,\n  \"credential_profile_ids\": [\n    \"{{credential_id}}\"\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/discoveries",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"discoveries"
						]
						},
						"description": "Create a new discovery profile using CIDR notation."
					},
					"response": []
				},
				{
					"name": "Create Discovery Profile (IP Range)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Datacenter B - Range\",\n  \"target_type\": \"ip_range\",\n  \"target_value\": \"192.168.20.1-192.168.20.50\",\n  \"ports\": [22, 161],\n  \"port_scan_timeout_ms\": 1000,\n  \"credential_profile_ids\": [\n    \"{{credential_id}}\"\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/discoveries",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"discoveries"
						]
						},
						"description": "Create a new discovery profile using IP range."
					},
					"response": []
				},
				{
					"name": "Create Discovery Profile (Single IP)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Single Server Discovery\",\n  \"target_type\": \"ip\",\n  \"target_value\": \"192.168.1.100\",\n  \"ports\": [22, 5985],\n  \"port_scan_timeout_ms\": 2000,\n  \"credential_profile_ids\": [\n    \"{{credential_id}}\"\n  ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/discoveries",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"discoveries"
						]
						},
						"description": "Create a new discovery profile for a single IP address."
					},
					"response": []
				},
				{
					"name": "Get Discovery Profile by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/discoveries/{{discovery_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"discoveries",
								"{{discovery_id}}"
						]
						},
						"description": "Get a specific discovery profile by ID."
					},
					"response": []
				},
				{
					"name": "Update Discovery Profile",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Discovery Profile\",\n  \"target_value\": \"192.168.10.0/25\",\n  \"ports\": [22, 5985]\n}"
						},
						"url": {
							"raw": "{{base_url}}/discoveries/{{discovery_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"discoveries",
								"{{discovery_id}}"
						]
						},
						"description": "Update an existing discovery profile."
					},
					"response": []
				},
				{
					"name": "Run Discovery Job",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    // Discovery is synchronous in current implementation.",
									"    // No job_id is returned; results can be immediately fetched from /results endpoint.",
									"    console.log('Discovery run completed.');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/discoveries/{{discovery_id}}/run",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"discoveries",
								"{{discovery_id}}",
								"run"
						]
						},
						"description": "Trigger a discovery scan. Returns immediate results in current implementation."
					},
					"response": []
				},
				{
					"name": "Get Discovery Results",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/discoveries/{{discovery_id}}/results",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"discoveries",
								"{{discovery_id}}",
								"results"
						]
						},
						"description": "Get the results (staging candidates) of the discovery scan."
					},
					"response": []
				},
				{
					"name": "Delete Discovery Profile",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/discoveries/{{discovery_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"discoveries",
								"{{discovery_id}}"
						]
						},
						"description": "Soft delete a discovery profile."
					},
					"response": []
				}
			],
			"description": "Discovery profile and job management endpoints"
		},
		{
			"name": "Monitors (Devices)",
			"item": [
				{
					"name": "List All Monitors",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/monitors?page=1&limit=50",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "50"
								},
								{
									"key": "status",
									"value": "active",
									"disabled": true
								},
								{
									"key": "plugin_id",
									"value": "windows-winrm",
									"disabled": true
								}
						]
						},
						"description": "List all monitors with optional filtering by status or plugin."
					},
					"response": []
				},
				{
					"name": "Get Monitor by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}"
						]
						},
						"description": "Get a specific monitor by ID."
					},
					"response": []
				},
				{
					"name": "Update Monitor - Set Maintenance",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"maintenance\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}"
						]
						},
						"description": "Set a monitor to maintenance mode (stops polling)."
					},
					"response": []
				},
				{
					"name": "Update Monitor - Set Active",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"active\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}"
						]
						},
						"description": "Activate a monitor (resumes polling)."
					},
					"response": []
				},
				{
					"name": "Update Monitor - Configuration",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"display_name\": \"web-prod-01-updated\",\n  \"polling_interval_seconds\": 120\n}"
						},
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}"
						]
						},
						"description": "Update monitor configuration (display name, polling interval, etc.)."
					},
					"response": []
				},
				{
					"name": "Delete Monitor",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}"
						]
						},
						"description": "Soft delete a monitor (data retained)."
					},
					"response": []
				},
				{
					"name": "Restore Monitor",
					"request": {
						"method": "PATCH",
						"header": [],
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}/restore",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}",
								"restore"
						]
						},
						"description": "Restore a soft-deleted monitor."
					},
					"response": []
				},
				{
					"name": "Get Monitor Metrics - CPU",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}/metrics?metric_group=host.cpu&start_time=2023-12-07T11:00:00Z&end_time=2023-12-07T12:00:00Z&tags={\"core\":\"0\"}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}",
								"metrics"
							],
							"query": [
								{
									"key": "metric_group",
									"value": "host.cpu"
								},
								{
									"key": "start_time",
									"value": "2023-12-07T11:00:00Z"
								},
								{
									"key": "end_time",
									"value": "2023-12-07T12:00:00Z"
								},
								{
									"key": "tags",
									"value": "{\"core\":\"0\"}" 
								}
						]
						},
						"description": "Get CPU metrics for a specific core."
					},
					"response": []
				},
				{
					"name": "Get Monitor Metrics - Memory",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}/metrics?metric_group=host.memory&start_time=2023-12-07T11:00:00Z&end_time=2023-12-07T12:00:00Z",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}",
								"metrics"
						]
						},
						"description": "Get memory usage metrics."
					},
					"response": []
				},
				{
					"name": "Get Monitor Metrics - Storage",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}/metrics?metric_group=host.storage&start_time=2023-12-07T11:00:00Z&end_time=2023-12-07T12:00:00Z&tags={\"mount\":\"/\"}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}",
								"metrics"
						]
						},
						"description": "Get storage metrics for a specific mount point."
					},
					"response": []
				},
				{
					"name": "Get Monitor Metrics - Network Interface",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}/metrics?metric_group=net.interface&start_time=2023-12-07T11:00:00Z&end_time=2023-12-07T12:00:00Z&tags={\"interface\":\"eth0\"}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}",
								"metrics"
						]
						},
						"description": "Get network interface metrics."
					},
					"response": []
				},
				{
					"name": "Get Monitor Metrics - Aggregated (5m avg)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/monitors/{{monitor_id}}/metrics?metric_group=host.cpu&start_time=2023-12-07T11:00:00Z&end_time=2023-12-07T12:00:00Z&aggregation=avg&interval=5m",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"monitors",
								"{{monitor_id}}",
								"metrics"
						]
						},
						"description": "Get aggregated metrics (5-minute average)."
					},
					"response": []
				}
			],
			"description": "Monitor (device) management and metrics endpoints"
		}
	]
}
